--- chroot.orig/etc/gdm3/PostLogin/Default	2014-09-16 17:00:27.948165188 +0000
+++ chroot/etc/gdm3/PostLogin/Default	2014-09-16 19:21:06.556288346 +0000
@@ -130,6 +130,21 @@
 XKBOPTIONS="$TAILS_XKBOPTIONS"
 EOF
 
+# Chose which browser language pack to use
+LONG_LOCALE="$(echo ${TAILS_LOCALE_NAME} | sed -e 's/\..*$//' -e 's/_/-/')"
+SHORT_LOCALE="$(echo ${LONG_LOCALE} | cut -d"-" -f1)"
+LANGPACK_DIR="/usr/local/lib/tor-browser/extensions"
+if [ -e "${LANGPACK_DIR}/langpack-${LONG_LOCALE}@firefox.mozilla.org.xpi" ]; then
+    BROWSER_LOCALE="${LONG_LOCALE}"
+elif [ -e "${LANGPACK_DIR}/langpack-${SHORT_LOCALE}@firefox.mozilla.org.xpi" ]; then
+    BROWSER_LOCALE="${SHORT_LOCALE}"
+else
+    BROWSER_LOCALE="en-US"
+fi
+echo "pref(\"general.useragent.locale\", \"${BROWSER_LOCALE}\");" > \
+     /var/lib/tails-user-session/browser-locale.js
+chmod 664 /var/lib/tails-user-session/browser-locale.js
+
 ### Persistence
 
 # Copy persistence configuration to a root-writable, world-readable place,
